# 04. 커밋 넘버링 전략 — prefix[#버전] 관리 기준

📁 위치: /practice/git-automation-notes/04_commit-numbering-strategy.md  
📅 정리일: 2025-08-01

---

## 🎯 목적

> feat[#13.6], fix[#14.3], docs[#12.2] 와 같은 커밋 prefix 넘버링을 체계적으로 정리하고자  
> **버전 단위의 흐름 관리 기준**을 정의한다.  
> 커밋 히스토리를 기능군/시기별로 분류해 추적성을 높인다.

---

## 🔢 prefix 번호 구분 방식

```
#<기능군 그룹>.<서브 커밋 숫자>
```

| 구성            | 예시           | 의미                          |
|-----------------|----------------|-------------------------------|
| 기능군 번호     | `#13`, `#14`   | 큰 변화 단위 (주제별 모듈, 릴리즈, 학습 파트 등) |
| 소수점(.n) 단위 | `#13.5`, `#14.1` | 해당 기능군 내부의 개별 커밋 흐름            |

---

## ✳️ 예시 릴리즈 기준

| prefix | 내용                                 |
|--------|--------------------------------------|
| `#13.x` | 커밋 메시지 복구, 유실 대응, 수작업 백업 |
| `#14.x` | 커밋 자동화 시스템 도입 (CLI, 로그 관리 등) |
| `#15.x` | 이후 추가 자동화 흐름 (예: push hook, CI 연계 등) 예상 |

---

## 🧩 prefix 증가 기준

```
· 새로운 기능군 시작 시 → 주번호 + '.1'
· 같은 기능군 내에서 커밋이 추가될 때 → 소수점 숫자 +1
```

📘 예시:

```
1️⃣ 최초 자동화 도구 개발
→ feat[#14.1]: 커밋 작성기 첫 도입

2️⃣ 기능 업데이트 추가
→ chore[#14.2]: .gitignore 설정 및 로그 분리

3️⃣ 로그 포맷 개선
→ refactor[#14.3]: 커밋 로그 append 구조 정비
```

---

## 🔄 prefix 관리 실수 방지 팁

| 실수 유형 | 예방 방법 |
|-----------|------------|
| 숫자를 잘못 올렸거나 중복됨 | git log --pretty 포맷으로 최근 prefix 수동 확인 |
| CLI 도구가 자동 추천 실패 | gen_langchain_commit.py 에서 fallback 기본값 설정 |
| prefix가 잘못된 기능군과 섞임 | 한 기능군 안에서는 기능 내에서 계속 증가만 허용 (점프 방지) |

---

## ✅ CLI 커밋 생성기와 prefix 자동화 연결

```
입력 항목: prefix
    ↳ 최근 커밋 메시지 중 가장 마지막 prefix 번호 → 자동 추출
    ↳ 예: #14.3 → 자동 제안 = #14.4
```

🔥 prefix 자동 증가 코드는 정규표현식 기반으로 git log 에서 추출됩니다:

```
matches = re.findall(r'#(\d+\.\d+)', log_output)
```

---

## 🎓 심화 팁: 번호 vs 브랜치 vs 태그

| 구분   | 설명                                        |
|--------|---------------------------------------------|
| prefix | 커밋 메시지에 직접 삽입, 커밋 그룹화 용도            |
| 브랜치 | 실제 작업 단위, 코드 격리                      |
| 태그   | 릴리즈 스냅샷 고정, 주로 공개 릴리즈에 사용           |

<br>

💡 prefix 번호는 "내부적인 의미 부여"에 탁월하며, 외부적인 릴리즈 버전과 충돌하지 않는 유연한 구분 방식입니다.

---

## 🔗 관련 문서

- [02_commit-msg-cli-usage.md](./02_commit-msg-cli-usage.md)
- [03_changelog-file-structure.md](./03_changelog-file-structure.md)

<br>

✅ 다음 문서 →  
📄 [05_gitignore-log-structure.md](./05_gitignore-log-structure.md): 자동 로그 파일과 gitignore 구성 전략 정리
