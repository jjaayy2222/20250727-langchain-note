# Few-shot 프롬프트 실무 인사이트와 문제해결 여정

## 실습 배경
- **날짜**: 2025-08-08
- **컨디션**: 개인적 컨디션 난조
- **목표**: 개인 프로젝트 마이크로 단위 연습 + 1일 1커밋 달성

## 1. 핵심 발견: 프롬프트 영향력 우선순위

### 1-1. 우선순위 체계 발견

- 실습 과정에서 발견한 **LLM 동작 제어 우선순위**:
- 
    ```<markdown>
      - 1순위: 프롬프트 설계 (`Few-shot` 예시, `instruction` 명확성)
      - 2순위: 응답 형식 지정 (`response_mime_type="application/json"`)
      - 3순위: LLM 파라미터 (`temperature`, `top_p` 등)
    ```

### 1-2. 구체적 실험 결과

**실험**: JSON 형식 + Few-shot 예시 + temperature 변화
- **결과**: `temperature`가 0.1이든 0.9든 거의 동일한 JSON 응답
- **원인**: `response_mime_type="application/json"` + Few-shot 예시가 강력한 제약 조건 역할
- **교훈**: 파라미터 튜닝보다 **프롬프트 설계**가 훨씬 중요

## 2. 문제해결 과정: JSON 파싱 실패

### 2-1. 문제 상황
- Few-shot + JSON 형식 조합이 계속 실패
- 동일한 코드가 이전에는 작동했으나 현재는 오류 발생

### 2-2. 원인 분석
- **근본 원인**: LangChain API 변경 사항
- **구체적 문제**: `FewShotChatMessagePromptTemplate` 사용법 변경

**기존 방식 (작동 안 함)**:
```
few_shot_prompt = FewShotChatMessagePromptTemplate(
    example_prompt=prompt_string,  # 문자열 전달
    examples=examples
)
```

**수정된 방식 (해결)**:
```
few_shot_prompt = FewShotChatMessagePromptTemplate(
    example_prompt=ChatPromptTemplate.from_messages([...]),  # 객체 전달
    examples=examples
)
```

### 2-3. 문제해결 접근법
1. **에러 메시지 분석** → API 변경 의심
2. **공식 문서 확인** → 변경사항 파악
3. **코드 수정 및 테스트** → 즉시 해결

**교훈**: 빠르게 변화하는 AI 라이브러리 생태계에서 **공식 문서 추적**의 중요성

## 3. Example Selector 문제: 의도와 다른 예시 선택

### 3-1. 발견한 문제
**시나리오**: "회의록 작성해 주세요" 요청
**기대**: 회의록 작성 예시 선택
**실제 결과**: 문장 교정 예시 선택 😱

### 3-2. 근본 원인 분석
- `SemanticSimilarityExampleSelector`는 예시 **전체 내용**으로 유사도 계산
- `instruction`, `input`, `answer` 모든 필드가 벡터화에 영향
- 결과적으로 **의도(instruction)**보다 **내용의 유사성**이 우선됨

### 3-3. 해결 과정
1. **문제 인식**: 여러 테스트를 통해 패턴 파악
2. **가설 수립**: "유사도 계산 방식의 문제"
3. **해결책 탐색**: `CustomExampleSelector` 발견 및 적용
4. **검증**: 동일 테스트로 개선 확인

**결과**: 의도에 맞는 정확한 예시 선택 달성 ✅

## 4. 실무 적용 관점에서의 인사이트

### 4-1. 비즈니스 가치
- **고객 지원**: 문의 유형별 최적 응답 템플릿 자동 선택
- **문서 자동화**: 작업 종류에 따른 템플릿 매칭 시스템
- **코드 생성**: 프로그래밍 언어/프레임워크별 예시 선택

### 4-2. 시스템 설계 원칙
1. **예시의 품질 > 수량**: 적은 수의 고품질 예시가 더 효과적
2. **의도 파악 최우선**: 사용자 의도를 정확히 파악하는 선택 로직 필수
3. **반복 개선**: 잘못된 선택 사례를 지속적으로 수집하여 개선

### 4-3. 강의/교육 관점
**교육 대상자(*8월 예정 강의*)에게 전달할 핵심**:
- AI 도구는 `마법`이 아니라 **정교한 설계**가 필요한 시스템
- **프롬프트 엔지니어링**이 AI 활용의 핵심 스킬
- 문제 발생 시 **체계적 문제해결 접근법**의 중요성

## 5. 개인적 성장 기록

### 5-1. 기술적 성장
- `Vector DB`, `Embedding`, `Custom Class` 등 **고급 기술 스택** 경험
- 문제 상황에서 **근본 원인 → 가설 → 해결책** 사고 프로세스 적용
- API 변경사항에 대한 **신속한 대응 능력** 향상

### 5-2. 학습 방법론 개선
- **컨디션이 좋지 않을 때도** 마이크로 단위로 학습 지속
- **문제해결 과정 기록**을 통한 지식 축적
- **실무 관점**에서 기술을 바라보는 시각 개발

### 5-3. 1일 1커밋 달성의 의미
- 단순한 코드 작성을 넘어 **의미 있는 문제해결**로 발전
- **꾸준함**이 가져온 기술적 깊이 체감
- **기록과 공유**를 통한 지식의 구조화

## 6. 앞으로의 발전 방향

### 6-1. 단기 목표
- `Custom Example Selector` 로직 추가 개선
- 다양한 도메인에서의 `Few-shot 프롬프트 실험`
- 성능 측정 지표 도입 (정확도, 응답 시간 등)

### 6-2. 장기 비전
- **프롬프트 엔지니어링 전문성** 확보
- **교육 콘텐츠**로 경험과 인사이트 체계화
- **실무 프로젝트**에서의 AI 도구 활용 역량 강화

---

*"컨디션이 좋지 않은 날에도, 작은 한 걸음이 쌓여 큰 성장을 만든다."*  
*- 2025.08.08, 소중한 하루의 기록*
